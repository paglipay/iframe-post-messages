<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style>
      .hide {
        display: none;
      }

      .show {
        display: block;
        border: black;
        border-style: solid;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <div id="bodydiv">
      <h1>Frame 1</h1>
      <div id="received-message1" name="received-message" class="show">
        <h1>1a</h1>
      </div>
      <div id="received-message2" name="received-message" class="hide">
        <h1>2a</h1>
      </div>
      <div id="received-message3" name="received-message" class="hide">
        <h1>3a</h1>
      </div>
    </div>
  </body>
  <script>
    (()=>{"use strict";var e={916:(e,t)=>{t.Z=function(e,t){var n=null;return function(){null!==n&&clearTimeout(n);var i=arguments,o=this;n=setTimeout((function(){e.apply(o,i)}),t)}}},908:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},581:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageMsgActionEnum=t.ExtActionEnum=void 0,t.ExtActionEnum={CLICK:"click",INIT:"init",PAGE_MSG:"page_msg",READ_COOKIE:"read_cookie",RESIZE:"resize",WRITE_COOKIE:"write_cookie"},t.PageMsgActionEnum={ADD_IDENTIFIER:"add_identifier",GET_QUERY_STRING:"get_query_string",HIDE_ELEMENT:"hide_element",SCROLL_TO_VIEW:"scroll_to_view",SHOW_ELEMENT:"show_element"}},53:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HostActionEnum=void 0,t.HostActionEnum={READ_COOKIE:"read_cookie",UPDATE_CREATIVE_POSITION:"update_creative_position",UPDATE_POSITION:"update_position",UPDATE_SCREEN_SIZE:"update_screen_size",WRITE_COOKIE:"write_cookie"}},161:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},200:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(908),t),o(n(581),t),o(n(53),t),o(n(161),t)}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(()=>{var e=n(581),t=n(53),i=n(200),o=n(916),r={error:[],inViewChange:[],metaChange:[],readCookie:[],ready:[],sizeChange:[],stateChange:[],writeCookie:[]},a=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r[e].forEach((function(e){return e.apply(void 0,n)}))};function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}var u="",d=function(e){var t;null==(t=window.top)||t.postMessage(JSON.stringify(c({id:u},e)),"*")},s={expand:!0,"read-cookie":!0,resize:!0,"resize-push":!0,"write-cookie":!0},v=function(e){return e?!!s[e]:s};var E=[];window.addEventListener("message",(function(e){E.forEach((function(t){try{var n=function(e){if("string"!=typeof e)return!1;try{JSON.parse(e)}catch(e){return!1}return!0}(e.data)?JSON.parse(e.data):e.data;n.type&&t(n)}catch(e){0}}))}));var f=function(e){return E.push(e),function(){var t=E.indexOf(e);t>-1&&E.splice(t,1)}};f((function(e){var n=e.type,i=e.payload;if(n===t.HostActionEnum.READ_COOKIE){var o=i.cookie;a("readCookie",o)}else if(n===t.HostActionEnum.WRITE_COOKIE){var r=i.cookie;a("writeCookie",r)}}));var p,h=function(){var e=document.body.getBoundingClientRect(),t=e.width;return{height:e.height,width:t}},l=0,_=0;f((function(e){var n=e.type,i=void 0===n?"":n,o=e.payload;i===t.HostActionEnum.UPDATE_CREATIVE_POSITION&&(l=o.x,_=o.y,p||(p=c({},h(),{x:l,y:_})))}));var g=0;f((function(e){var n=e.type,i=void 0===n?"":n,o=e.payload;i===t.HostActionEnum.UPDATE_CREATIVE_POSITION&&(g=o.intersectionRatio,a("inViewChange"))}));var y=0,O=0;f((function(e){var t=e.type,n=void 0===t?"":t,i=e.payload;switch(n){case"update_creative_position":case"update_screen_size":O=i.screenHeight||i.height,y=i.screenWidth||i.width}}));var m="loading",I=function(e){m!==e&&a("stateChange"),m=e},w={ext:{addEventListener:function(e,t){r[e].push(t)},cookie:function(t,n){n&&t&&v("write-cookie")?d({payload:{cookie:{data:n,name:t}},type:e.ExtActionEnum.WRITE_COOKIE}):v("read-cookie")&&d({payload:{cookie:{name:t}},type:e.ExtActionEnum.READ_COOKIE})},getCurrentPosition:function(){return c({},h(),{x:l,y:_})},getDefaultPosition:function(){return p},getInViewPercentage:function(){return g},getScreenSize:function(){return{height:O,width:y}},getState:function(){return m},getVersion:function(){return"0.1.13"},removeEventListener:function(e,t){r[e]=r[e].filter((function(e){return e!==t}))},sendPageMsg:function(e,t){var n={payload:{action:e,params:t},type:i.ExtActionEnum.PAGE_MSG};d(n)},supports:v},version:"0.1.13"};window.$sf=w;var A=(0,o.Z)((function(){var t={payload:h(),type:e.ExtActionEnum.RESIZE};d(t)}),250),C=function(e){void 0===e&&(e=!0),A(),e&&(I("resized"),a("sizeChange"))};var T=JSON.parse(decodeURIComponent(window.name)),P=T.id,R=T.html,b=T.config,S=void 0===b?{}:b,x=S.sfLoadEvent,k=void 0===x?"instant":x,D=S.sfType,L=void 0===D?"ads":D;u=P;var N="WalmartActiveViewElement";document.write('<div id="'+N+'">'+R+"</div>");var K=document.getElementById(N);if(K&&"customHtml"!==L){var M,j,z,H,V=!1,W=function(){var t;V||(t={payload:void 0,type:e.ExtActionEnum.CLICK},d(t),V=!0)};K.addEventListener("mousedown",(function(e){M||j||function(e){return!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)&&("buttons"in e?1===e.buttons:"which"in e?1===e.which:1===e.button||"click"===e.type)}(e)&&W()})),K.addEventListener("touchstart",(function(e){M=e.changedTouches[0].screenX,j=e.changedTouches[0].screenY})),K.addEventListener("touchend",(function(e){z=e.changedTouches[0].screenX,H=e.changedTouches[0].screenY,z===M&&H===j&&W()}))}var U=!1,G=function(){var t;U||(U=!0,function(e,t){if("undefined"!=typeof ResizeObserver){var n=new ResizeObserver((function(e){var n=e[0];t(n)}));return n.observe(e),function(){n.unobserve(e)}}var i=e.getBoundingClientRect(),o=i.width,r=i.height,a=setInterval((function(){var n=e.getBoundingClientRect();r===n.height&&o===n.width||(r=n.height,o=n.width,t())}),50)}(document.body,(function(){return C(!0)})),t={payload:void 0,type:e.ExtActionEnum.INIT},d(t),a("ready"),C(!1),I("default"))};"instant"===k?G():(K&&K.addEventListener(k,G),window.addEventListener(k,G))})()})();
  </script>
  <script>
    function displayMessage(evt) {
      let id = 0;
      if (evt.origin !== "http://127.0.0.1:5500") {
        console.log("Incorrect evt.origin");
      } else {
        id = evt.data.id;
        const divs = document.getElementsByName("received-message");
        for (let d = 0; d < divs.length; d++) {
          if (d === id) {
            divs[d].setAttribute("class", "show");
          } else {
            divs[d].setAttribute("class", "hide");
          }
        }
      }

      console.log("evt.data: ", evt.data);
      const col = document.getElementById("bodydiv");
      console.log(col);
    }

    if (window.addEventListener) {
      // For standards-compliant web browsers
      window.addEventListener("message", displayMessage, false);
    } else {
      window.attachEvent("onmessage", displayMessage);
    }
    window.onload = function () {
      const col = document.getElementById("bodydiv");
      console.log("iframe1:", col);
      window.parent.postMessage(
        { iframe1: col.outerHTML, action: { type: "", payload: {} } },
        "*"
      );
    };
  </script>
</html>
